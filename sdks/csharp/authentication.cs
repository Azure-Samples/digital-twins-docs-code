// <Azure_Digital_Twins_dependencies>
using Azure.Identity;
using Azure.DigitalTwins.Core;
// </Azure_Digital_Twins_dependencies>

// ------------------ DefaultAzureCredential with try/catch (Full) ------------------ 
// <DefaultAzureCredential_full>
// The URL of your instance, starting with the protocol (https://)
private static string adtInstanceUrl = "https://<your-Azure-Digital-Twins-instance-URL>";

//...

DigitalTwinsClient client;
try
{
    var credential = new DefaultAzureCredential();
    client = new DigitalTwinsClient(new Uri(adtInstanceUrl), credential);
}
catch(Exception e)
{
    Console.WriteLine($"Authentication or client creation error: {e.Message}");
    Environment.Exit(0);
}
// </DefaultAzureCredential_full>

// ------------------ ManagedIdentityCredential ------------------
// <ManagedIdentityCredential>
ManagedIdentityCredential cred = new ManagedIdentityCredential(adtAppId);
DigitalTwinsClientOptions opts = new DigitalTwinsClientOptions
{
    Transport = new HttpClientTransport(httpClient)
});
client = new DigitalTwinsClient(new Uri(adtInstanceUrl), cred, opts);
// </ManagedIdentityCredential>

// ------------------ InteractiveBrowserCredential ------------------
// <InteractiveBrowserCredential>
// Your client / app registration ID
private static string clientId = "<your-client-ID>"; 
// Your tenant / directory ID
private static string tenantId = "<your-tenant-ID>";
// The URL of your instance, starting with the protocol (https://)
private static string adtInstanceUrl = "https://<your-Azure-Digital-Twins-instance-URL>";

//...

DigitalTwinsClient client;
try
{
    var credential = new InteractiveBrowserCredential(tenantId, clientId);
    client = new DigitalTwinsClient(new Uri(adtInstanceUrl), credential);
} catch(Exception e)
{
    Console.WriteLine($"Authentication or client creation error: {e.Message}");
    Environment.Exit(0);
}
// </InteractiveBrowserCredential>
